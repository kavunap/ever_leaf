<%= simple_form_for(@task, class: 'task-card', local: true, :html => {:multipart => true}) do |f| %>
  <% if task.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(task.errors.count, "error") %> prohibited this task from being saved:</h2>

      <ul>
      <% task.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name, class: 'font-weight-bolder' %>&emsp;&emsp;&emsp;&emsp;
    <%= f.text_field :name, class: "field1" %>
  </div>
  &nbsp;&nbsp;&nbsp;&nbsp;
  <div class="field"> 
    <%= f.label :content, class: 'font-weight-bolder' %> &emsp;&emsp;&emsp;
    <%= f.text_area :content, class: "field1" %>
  </div>
  &nbsp;&nbsp;&nbsp;&nbsp;
  <div class="field">
    <%= f.label :status, class: 'font-weight-bolder' %>&emsp;&emsp;&emsp;&emsp;
    <%= f.select :status, ['Not Started', 'In progress', 'Done'], class: "field1" %>
  </div>
  &nbsp;&nbsp;&nbsp;&nbsp;
  <div class="field">
    <%= f.label :priority, class: 'font-weight-bolder' %>&emsp;&emsp;&emsp;
    <%= f.select :priority, ['High', 'medium', 'Under'], class: "field1" %>
  </div>
  &nbsp;&nbsp;&nbsp;&nbsp;
  <div class="field">
    <%= f.label :start_date, class: 'font-weight-bolder' %>&emsp;&emsp;
    <%= f.date_select :start_date, class: "field1" %>
  </div>
  &nbsp;&nbsp;&nbsp;&nbsp;
  <div class="field">
    <%= f.label :end_date, class: 'font-weight-bolder' %>&emsp;&emsp;
    <%= f.date_select :end_date, class: "field1" %>
  </div>
  &nbsp;&nbsp;&nbsp;&nbsp;
  
  <div class="field">
  
    <%= f.hidden_field :user_id, value: 'current_user.id' %>
  </div>

  <% if false %>
  <div id="labels">
    <%Label.all.each do |label| %>
      <%= f.check_box :label_ids, { multiple: true, checked: label[:checked],
        disabled: label[:disabled], include_hidden: false }, label[:id] %>
      <label style = "background-color: aquamarine"> <%= label.title %>
    <% end %>
 </div>

      
  <div class="field">
  <% Label.all.each do |label| %>
   <%= label_tag label.title, label.title %>
   <%= check_box_tag 'task[label][]', label.title, checked(label.title), id: 'label1' %>
  <% end %>
  </div>

  <%= f.simple_fields_for(:label_associations) do |roles_form| %>
    <% role = roles_form.object.title.titleize %>
    <%= roles_form.input :name, as: :hidden %>
    <%= roles_form.simple_fields_for(:entity) do |entity_form| %>
      <%= entity_form.input :name, label: "#{role} Name" %>
      <%= entity_form.input :address, label: "#{role} Address" %>
    <% end %>
  <% end %>
<% end %>
  <%= f.simple_fields_for(:label_associations) do |roles_form| %>
   
    <%= roles_form.input :label_id %>
    <%= roles_form.input :task_id %>
    <%= roles_form.simple_fields_for(:label) do |entity_form| %>
      <%= entity_form.input :title, label: "#{role} Name" %>
      <%= entity_form.input :content, label: "#{role} Address" %>
    <% end %>
  

  <% end %>
  <div class="actions">
    <%= f.submit 'Unda task', class:'btn btn-success' %>
  </div>
<% end %>
